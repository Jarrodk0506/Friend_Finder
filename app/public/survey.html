<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="C:\Users\Jarro\UCFBootcamp\Homework\Friend_Finder\app\css\style.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <title>Friend Finder</title>
</head>

<body>
    <div class="container-fluid">
        <h1>Survey Questions</h1>
        <br>
        <form>
            <h2>About you</h2>
            <div class="form-group">
                <label for="name">Name (Required)</label>
                <input type="email" class="form-control" id="name" placeholder="Enter Name">
            </div>
            <div class="form-group">
                <label for="photo">Link to Photo Image (Required)</label>
                <input type="link" class="form-control" id="photo" placeholder="Photo Link">
            </div>
            <br>
            <div>
                <h2>Question 1</h2>
                <h3>Input question here? (1: Strongly Disagree - 5: Strongly Agree)</h3>
                <select id="q1" class="form-control form-control-sm col-sm-2">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <br>
            <div>
                <h2>Question 2</h2>
                <h3>Input question here? (1: Strongly Disagree - 5: Strongly Agree)</h3>
                <select id="q2" class="form-control form-control-sm col-sm-2">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <br>
            <div>
                <h2>Question 3</h2>
                <h3>Input question here? (1: Strongly Disagree - 5: Strongly Agree)</h3>
                <select id="q3" class="form-control form-control-sm col-sm-2">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <br>
            <div>
                <h2>Question 4</h2>
                <h3>Input question here? (1: Strongly Disagree - 5: Strongly Agree)</h3>
                <select id="q4" class="form-control form-control-sm col-sm-2">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <br>
            <div>
                <h2>Question 5</h2>
                <h3>Input question here? (1: Strongly Disagree - 5: Strongly Agree)</h3>
                <select id="q5" class="form-control form-control-sm col-sm-2">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <br>
            <div>
                <h2>Question 6</h2>
                <h3>Input question here? (1: Strongly Disagree - 5: Strongly Agree)</h3>
                <select id="q6" class="form-control form-control-sm col-sm-2">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <br>
            <div>
                <h2>Question 7</h2>
                <h3>Input question here? (1: Strongly Disagree - 5: Strongly Agree)</h3>
                <select id="q7" class="form-control form-control-sm col-sm-2">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <br>
            <div>
                <h2>Question 8</h2>
                <h3>Input question here? (1: Strongly Disagree - 5: Strongly Agree)</h3>
                <select id="q8" class="form-control form-control-sm col-sm-2">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <br>
            <div>
                <h2>Question 9</h2>
                <h3>Input question here? (1: Strongly Disagree - 5: Strongly Agree)</h3>
                <select id="q9" class="form-control form-control-sm col-sm-2">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <br>
            <div>
                <h2>Question 10</h2>
                <h3>Input question here? (1: Strongly Disagree - 5: Strongly Agree)</h3>
                <select id="q10" class="form-control form-control-sm col-sm-2">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>
            <br>
            <button type="button" id="submit" class="btn btn-primary btn-lg btn-block">Submit</button>

        </form>
        <br><br>
        <p><a href="/api/friends">Friend List Api</a> || <a href=""></a>Github Repo</p>


        <div id="myModal" class="modal">

            <!-- Modal content -->
            <div class="modal-content">
                <span class="close">&times;</span>
                <p>Some text in the Modal..</p>
            </div>

        </div>


    </div>

    <script type="text/javascript">

        
        $("#submit").on("click", function (event) {
            event.preventDefault();

            var newFriend = {
                name: $("#name").val().trim(),
                link: $("#photo").val().trim(),
                scores: [
                    $("#q1").val(),
                    $("#q2").val(),
                    $("#q3").val(),
                    $("#q4").val(),
                    $("#q5").val(),
                    $("#q6").val(),
                    $("#q7").val(),
                    $("#q8").val(),
                    $("#q9").val(),
                    $("#q10").val(),
                ]
            };

            console.log(newFriend);

            $.get("/api/friends")
                .then(function (data) {
                    alert("finding friend");

                    var comp = [100];
                    var match = "";

                    for (var i = 0; i < data.length; i++) {

                        var newFriendScore = newFriend.scores;
                        var compareFriendScore = data[i].scores;
                        var totalDifference = 0;


                        console.log("This is your score: " + newFriendScore);
                        console.log("This is " + data[i].name + "'s score: " + compareFriendScore);

                        for (var b = 0; b < compareFriendScore.length; b++) {
                            if (compareFriendScore[b] > parseFloat(newFriendScore[b])) {
                                totalDifference += parseFloat(compareFriendScore[b]) - parseFloat(newFriendScore[b]);
                            } else {
                                totalDifference += parseFloat(newFriendScore[b]) - parseFloat(compareFriendScore[b]);
                            }
                        };
                        console.log("The total difference of is: " + totalDifference + "\n\n\n");

                        if (totalDifference < comp) {
                            comp.splice([0]);
                            comp.push(totalDifference);
                            match = data[i].name;
                        }
                    };

                    console.log(match + " is your closest match");
                    $.post("/api/friends", newFriend)
                    alert(match + " Is Your closest friend!");

                });

        });

    </script>


    <script src="server.js"></script>
</body>

</html>